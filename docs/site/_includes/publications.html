{%- assign publications = site.data.publications[include.language] | sort: 'created' | reverse %}
{%- assign publications_by_year = publications | group_by_exp: "publication", "publication.created | date: '%Y'" %}
{%- assign i18n = site.data.publications.i18n[include.language] %}

<div class="main-container page__container">
    <div class="publications">
        {%- for year in publications_by_year %}
            <div class="publications__year">
                {{ year.name }}
            </div>
            <div class="publications__list">
                <div class="publications__sizer"></div>
                {%- for publication in year.items %}
                    <div class="publications__post">
                        <div class="publications__post-content">
                            <div class="publications__post-head" style="background-image: url('{{ publication.img | true_relative_url }}')">
                                <div class="publications__post-head-content">
                                    <div class="publications__post-date">
                                        {{ publication.created | date: "%d %b" }}
                                    </div>
                                </div>
                            </div>
                            <div class="publications__post-body">
                                <div class="publications__post-title">
                                    {{ publication.title }}
                                </div>
                                {%- if publication.comment %}
                                    <div class="publications__post-comment">
                                        {{ publication.comment }}
                                    </div>
                                {%- endif %}
                                <div class="publications__post-btns">
                                    {%- if publication.url %}
                                        <a href="{{ publication.url }}" class="publications__btn" target="_blank">
                                            {{ i18n.default_btn_title }}
                                        </a>
                                    {%- endif %}
                                    {%- if publication.medium_url %}
                                        <a href="{{ publication.medium_url }}" class="publications__btn" target="_blank">
                                            {{ i18n.medium_btn_title }}
                                        </a>
                                    {%- endif %}
                                    {%- if publication.blog_url %}
                                        <a href="{{ publication.blog_url }}" class="publications__btn" target="_blank">
                                            {{ i18n.blog_btn_title }}
                                        </a>
                                    {%- endif %}
                                    {%- if publication.habr_url %}
                                        <a href="{{ publication.habr_url }}" class="publications__btn" target="_blank">
                                            {{ i18n.habr_btn_title }}
                                        </a>
                                    {%- endif %}
                                    {%- for custom in publication.custom_urls %}
                                        <a href="{{ custom.url }}" class="publications__btn" target="_blank">
                                            {{ i18n.custom_url_btn_title_prefix }}{{ custom.service_name }}
                                        </a>
                                    {%- endfor -%}
                                    {%- if publication.youtube_url %}
                                        <a href="{{ publication.youtube_url }}" class="publications__btn" target="_blank">
                                            {{ i18n.youtube_btn_title }}
                                        </a>
                                    {%- endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                {%- endfor %}
                </div>
        {%- endfor %}
    </div>
</div>
