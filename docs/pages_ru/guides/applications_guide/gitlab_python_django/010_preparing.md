---
title: Подготовка к работе
sidebar: applications_guide
permalink: documentation/guides/applications_guide/gitlab_python_django/010_preparing.html
layout: guide
toc: false
---

В этой главе мы рассмотрим, как подготовить приложение и инфраструктуру для того, чтобы можно было это приложение развернуть в Kubernetes.

Предполагается что читатель имеет базовые знания в разработке на Python + Django, а также немного знаком с Gitlab CI и примитивами Kubernetes, либо готов во всём этом разобраться самостоятельно. Мы постараемся предоставить ссылки и подсказки для новичков.

Собирать приложения будем с помощью werf. Данный инструмент работает в Linux, MacOS и Windows, инструкция по [установке](https://ru.werf.io/documentation/guides/installation.html) находится на официальном [сайте](https://ru.werf.io/).

## Подготовка приложения

Наилучшим образом приложения будут работать в Kubernetes - если они соответствуют [12 факторам heroku](https://12factor.net/). Благодаря этому - у нас в Kubernetes работают stateless приложения, которые не зависят от среды. Это важно, так как кластер может самостоятельно переносить приложения с одного узла на другой, заниматься масштабированием и т.п. — и мы не указываем, где конкретно запускать приложение, а лишь формируем правила, на основании которого кластер принимает свои собственные решения.

Если приложение не соответствует этим требованиям полностью или частично — можно найти обходные пути, однако это является задачей продвинутого уровня и мы не будем рассматривать такие решения в этом гайде.

## Подготовка и настройка среды

Перед деплоем нашего приложения необходимо убедиться что наша инфраструктура готова к тому чтобы использовать werf. Используя [инструкцию](https://ru.werf.io/documentation/guides/gitlab_ci_cd_integration.html#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-runner) по подготовке к использованию Werf в Gitlab CI, вам нужно убедиться что все следующие пункты выполнены:

*   У вас есть работающий и настроенный Kubernetes кластер
*   Код приложения находится в Gitlab
*   Поднят и настроен gitlab runner
    *   Раннер находится на отдельном сервере
    *   У раннера есть сетевая доступность до мастер ноды Kubernetes
    *   На данном сервере установлен gitlab-runner.
    *   Gitlab-runner подключен к нашему Gitlab с тегом `werf` в режиме shell executor. 
    *   Для пользователя, которого использует gitlab-runner, [установлен multiwerf](https://ru.werf.io/documentation/guides/installation.html#installing-multiwerf)
    *   Для пользователя, которого использует gitlab-runner, установлен kubectl и добавлен конфигурационный файл для подключения к Kubernetes.
*   Ранеры включены и активны для репозитория с нашим приложением.
*   Для gitlab включен и настроен gitlab registry

<div>
    <a href="020_basic.html" class="nav-btn">Далее: Базовые настройки</a>
</div>
