sections:
  - id: meta-section
    description:
      en: Meta section
      ru: Секция мета-информации
    directives:
      - name: project
        value: "string"
        description:
          en: Unique project name
          ru: Уникальное имя проекта приложения
        required: true
      - name: configVersion
        value: "int"
        description:
          en: Config syntax version. It should always be 1 for now
          ru: Версия конфигурации. На данный момент поддерживается единственная версия 1
        required: true
      - name: build
        description:
          en: Common build settings
          ru: Общие настройки сборки
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - &meta-section-build-cache-version
            name: cacheVersion
            description:
              en: "Cache version"
              ru: "Версия кеша"
            value: "string"
          - name: platform
            description:
              en: Common list of target platforms for all images (for example ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
              ru: Общий список целевых платформ для всех образов (например ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
            value: "[ string, ... ]"
          - name: staged
            value: "bool"
            description:
              en: "Enable layer-by-layer caching of Dockerfile instructions in container registry globally for all images"
              ru: "Включить послойное кеширование инструкций Dockerfile в container registry глобально для всех образов"
          - name: imageSpec
            description:
              en: Global image configuration options according to the OCI specification, which will be applied to all images
              ru: Глобальная конфигурация образов согласно OCI спецификации, которая применяется ко всем образам
            collapsible: true
            isCollapsedByDefault: false
            detailsArticle:
              en: "/usage/build/images.html#changing-image-configuration-spec"
              ru: "/usage/build/images.html#изменение-конфигурации-образов"
            directives:
              - name: author
                value: "string"
                description:
                  en: Author of the image
                  ru: Автор образа
              - name: clearHistory
                value: "bool"
                description:
                  en: Remove all image build history
                  ru: Удалить всю историю сборки образа
              - name: config
                description:
                  en: Common image configuration
                  ru: Общая конфигурация образа
                collapsible: true
                isCollapsedByDefault: false
                directives:
                  - name: labels
                    value: "{ name string: value string, ... }"
                    description:
                      en: List of labels to add
                      ru: Список лейблов для добавления
                  - name: removeLabels
                    value: "[ string || /REGEXP/, ... ]"
                    description:
                      en: List of labels to remove
                      ru: Список лейблов для удаления
                  - name: keepEssentialWerfLabels
                    value: "bool"
                    description:
                      en: Do not remove werf labels necessary for normal operation
                      ru: Не удалять необходимые для штатной работы werf лейблы
      - name: deploy
        description:
          en: Settings for deployment
          ru: Настройки выката
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: helmChartDir
            value: "string"
            description:
              en: Path to the helm chart directory of the project
              ru: Путь до директории helm чарта проекта
            default: ".helm"
          - name: helmChartConfig
            description:
              en: Override Chart.yaml configuration
              ru: Переопределить конфигурацию в Chart.yaml
            collapsible: true
            isCollapsedByDefault: false
            directives:
              - name: appVersion
                value: "string"
                description:
                  en: Override appVersion in Chart.yaml
                  ru: Переопределить appVersion в Chart.yaml
          - name: helmRelease
            value: "string"
            description:
              en: Release name template
              ru: Шаблон имени релиза
            default: "[[ project ]]-[[ env ]]"
          - name: helmReleaseSlug
            value: "bool"
            description:
              en: Release name slugification
              ru: Слагификация имени релиза
            default: true
          - name: namespace
            value: "string"
            description:
              en: Kubernetes namespace template
              ru: Шаблон Kubernetes namespace
            default: "[[ project ]]-[[ env ]]"
          - name: namespaceSlug
            value: "bool"
            description:
              en: Kubernetes namespace slugification
              ru: Слагификация Kubernetes namespace
            default: true
      - name: cleanup
        description:
          en: Settings for cleaning up irrelevant images
          ru: Настройка удаления неактуальных образов
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: disable
            value: "bool"
            description:
              en: Disable cleanup entirely. This prevents meta images from being published to the container registry. After disabling, you can run werf cleanup to remove existing meta images
              ru: Отключить очистку полностью, что предотвращает публикацию мета-образов в container registry. После отключения можно выполнить werf cleanup для удаления существующих мета-образов
          - name: disableKubernetesBasedPolicy
            value: "bool"
            description:
              en: Disable a cleanup policy that allows not to remove images deployed in Kubernetes from the container registry
              ru: Отключить политику очистки, которая позволяет не удалять запущенные в Kubernetes образы из container registry
          - name: disableGitHistoryBasedPolicy
            value: "bool"
            description:
              en: Disable a cleanup policy that allows not to remove images taking into account user-defined policies by the Git history (keepPolicies)
              ru: Отключить политику очистки, которая позволяет не удалять образы с учётом пользовательских политик по истории Git (keepPolicies)
          - name: disableBuiltWithinLastNHoursPolicy
            value: "bool"
            description:
              en: Disable a cleanup policy that allows not to remove images built in last hours (keepImagesBuiltWithinLastNHours)
              ru: Отключить политику очистки, которая позволяет не удалять образы, собранные в рамках заданного периода времени (keepImagesBuiltWithinLastNHours)
          - name: keepImagesBuiltWithinLastNHours
            value: "uint"
            description:
              en: The minimum number of hours that must elapse since the image is built
              ru: Минимальное количество часов, которое должно пройти с момента сборки образа
            default: "2"
          - name: keepPolicies
            description:
              en: Set of policies to select relevant image versions using the Git history
              ru: Набор политик для выборки актуальных версий образов, используя историю Git
            directiveList:
              - name: references
                description:
                  en: References to perform scanning on
                  ru: Набор references, который будет использоваться при сканировании
                directives:
                  - name: branch
                    value: "string || /REGEXP/"
                    description:
                      en: One or more git origin branches
                      ru: Множество git origin веток
                  - name: tag
                    value: "string || /REGEXP/"
                    description:
                      en: One or more git origin tags
                      ru: Множество git origin тегов
                  - name: limit
                    description:
                      en: The set of rules to limit references on the basis of the date when the git tag was created or the activity in the git branch
                      ru: Набор правил, по которым можно ограничить описанное множество references, основываясь на времени создания git-тега или активности в git-ветке
                    directives:
                      - name: last
                        value: "int"
                        description:
                          en: To select n last references from those defined in the branch or tag
                          ru: Выборка последних n references из определённого в branch/tag множества
                        default: "-1"
                      - name: in
                        value: "duration string"
                        description:
                          en: To select git tags that were created during the specified period or git branches that were active during the period
                          ru: Выборка git-тегов, которые были созданы в указанный период, или git-веток с активностью в рамках периода. Также для определённого множества branch/tag
                      - name: operator
                        value: "And || Or"
                        default: And
                        description:
                          en: Check both conditions or any of them
                          ru: Определяет какие references будут результатом политики, те которые удовлетворяют оба условия или любое из них
              - name: imagesPerReference
                description:
                  en: The limit on the number of image versions for each reference contained in the set
                  ru: Лимит искомых версий образов для каждого reference из множества
                directives:
                  - name: last
                    value: "int"
                    description:
                      en: The number of image versions to search for each reference
                      ru: Количество искомых версий образов для каждого reference
                    default: "-1"
                  - name: in
                    value: "duration string"
                    description:
                      en: The time frame in which werf searches for images
                      ru: Период, в рамках которого необходимо выполнять поиск образов
      - name: gitWorktree
        description:
          en: Configure how werf handles git worktree of the project
          ru: Настройки связанные с работой werf с рабочей директорией git проекта
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: forceShallowClone
            value: "bool"
            description:
              en: Force werf to use shallow clone despite restrictions
              ru: Принудительно позволить werf использовать shallow clone несмотря на ограничения данного подхода
            default: false
          - name: allowUnshallow
            value: "bool"
            description:
              en: Allow werf to automatically convert project shallow git clone to full one during build process when needed
              ru: Разрешить процессу werf автоматически преобразовать shallow clone проекта в полный clone в процессе сборки по необходимости
            default: true
          - name: allowFetchOriginBranchesAndTags
            value: "bool"
            description:
              en: Allow werf to synchronize git branches and tags with remote origin during cleanup process when needed
              ru: Разрешить процессу werf автоматически скачать новые ветки и теги из origin в процессе cleanup по необходимости
            default: true
  - id: dockerfile-image-section
    description:
      en: "Dockerfile image section: optional, define as many image sections as you need"
      ru: "Секция Dockerfile image: может использоваться произвольное количество секций"
    directives:
      - &dockerfile-image-section-image
        name: image
        value: "string || [ string, ... ]"
        description:
          en: One or more unique names for image
          ru: Одно или несколько уникальных имён для образа
        required: true
      - &dockerfile-image-section-final
        name: final
        value: bool
        default: true
        description:
          en: "Mark image as final"
          ru: "Пометить образ как финальный"
        detailsArticle:
          en: "/usage/build/images.html#using-intermediate-and-final-images"
          ru: "/usage/build/images.html#использование-промежуточных-и-конечных-образов"
      - name: dockerfile
        value: "string"
        description:
          en: Dockerfile path relative to the context PATH
          ru: Путь к Dockerfile относительно директории контекста
        required: true
      - name: staged
        value: "bool"
        description:
          en: "Enable layer-by-layer caching of Dockerfile instructions in container registry"
          ru: "Включить послойное кеширование Dockerfile-инструкций в container registry"
      - << : *meta-section-build-cache-version
      - name: context
        value: "string"
        description:
          en: Build context PATH inside project directory
          ru: Путь к контексту внутри папки проекта
      - name: platform
        description:
          en: List of target platforms for this image (for example ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
          ru: Список целевых платформ для данного образа (например ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
        value: "[ string, ... ]"
      - name: contextAddFiles
        value: "[ string, ... ]"
        description:
          en: Untracked files and directories for adding to build context. The paths must be relative to context PATH
          ru: Добавление нехранящихся в git файлов и директорий в сборочный контекст. Пути должны быть относительно директории контекста
      - name: target
        value: "string"
        description:
          en: Specific Dockerfile stage (last one by default, similar to the docker build --target option)
          ru: Конкретная стадия Dockerfile (по умолчанию — последняя, подобно docker build --target)
      - name: args
        value: "{ name string: value string, ... }"
        description:
          en: Variables for ARG dockerfile instructions (similar to the docker build --build-arg option)
          ru: Переменные для ARG Dockerfile-инструкций (подобно docker build --build-arg)
      - name: addHost
        value: "[ string, ... ]"
        description:
          en: Custom host-to-IP mapping (host:ip) (similar to the docker build --add-host option)
          ru: Установить связь host-to-IP (host:ip) (подобно docker build --add-host)
      - name: network
        value: "string"
        description:
          en: The networking mode for the RUN instructions during build (similar to the docker build --network option)
          ru: Сетевой режим для инструкций RUN во время сборки (подобно docker build --network)
      - name: ssh
        value: "string"
        description:
          en: SSH agent socket or keys to the build (similar to the docker build --ssh option) (DEPRECATED)
          ru: Сокет агента SSH или ключи для сборки (подобно docker build --ssh) (DEPRECATED)
        detailsArticle:
          en: "/usage/build/images.html#using-build-secrets"
          ru: "/usage/build/images.html#использование-сборочных-секретов"
      - &dockerfile-secrets-section
        name: secrets
        description:
          en: "Secrets used in image build. Only one of the following options can be used in a single instance: env, src, or value"
          ru: "Секреты, используемые при сборке образа. В одном экземпляре можно использовать только одну из следующих опций: env, src или value"
        detailsArticle:
          en: "/usage/build/images.html#using-build-secrets"
          ru: "/usage/build/images.html#использование-сборочных-секретов"
        directiveList:
          - name: id
            value: "string"
            description:
              en: Secret unique identifier (mandatory only for the value type)
              ru: Уникальный идентификатор секрета (обязателен только для секретов типа value)
          - name: env
            value: "string"
            description:
              en: A secret from an environment variable
              ru: Секрет из переменной окружения
          - name: src
            value: "string"
            description:
              en: A secret from a file at the given path
              ru: Секрет из файла по указанному пути
          - name: value
            value: "string"
            description:
              en: Custom string value
              ru: Произвольное строковое значение
      - name: dependencies
        description:
          en: "Dependency images for current image"
          ru: "Образы-зависимости для текущего образа"
        collapsible: true
        isCollapsedByDefault: false
        directiveList:
          - name: image
            value: "string"
            description:
              en: "Dependency image name, which should be built before building current image"
              ru: "Имя зависимого образа, который должен быть собран до сборки текущего образа"
          - name: imports
            description:
              en: "Define target build args to import image information into current image (optional)"
              ru: "Определить аргументы для импорта информации о зависимом образе в текущий образ используя Dockerfile build-args (опционально)"
            collapsible: false
            isCollapsedByDefault: false
            directiveList:
            - name: type
              value: "string"
              description:
                en: "Type of image info: ImageName, ImageDigest, ImageRepo or ImageTag"
                ru: "Тип импортируемой информации об образе: ImageName, ImageDigest, ImageRepo или ImageTag"
            - name: targetBuildArg
              value: "string"
              description:
                en: "Name of build argument which will contain specified type of information about image"
                ru: "Имя аргумента (Dockerfile build-args), который будет содержать указанный тип информации об образе"
      - &common_image_spec_config
        name: imageSpec
        description:
          en: Image configuration according to the OCI specification
          ru: Конфигурация образа согласно OCI спецификации
        detailsArticle:
          en: "/usage/build/images.html#changing-image-configuration-spec"
          ru: "/usage/build/images.html#изменение-конфигурации-образов"
        directives:
          - name: author
            value: "string"
            description:
              en: Author of the image
              ru: Автор образа
          - name: clearHistory
            value: "bool"
            description:
              en: Remove all image build history
              ru: Удалить всю историю сборки образа
          - name: config
            description:
              en: Common image configuration
              ru: Общая конфигурация образа
            collapsible: true
            isCollapsedByDefault: false
            directives:
              - name: cmd
                value: "[string, ...]"
                description:
                  en: Set CMD
                  ru: Установить CMD
                detailsLink: "https://docs.docker.com/engine/reference/builder/#cmd"
              - name: entrypoint
                value: "[string, ...]"
                description:
                  en: Set ENTRYPOINT
                  ru: Установить ENTRYPOINT
                detailsLink: "https://docs.docker.com/engine/reference/builder/#entrypoint"
              - name: env
                value: "{ name string: value string, ... }"
                description:
                  en: List of environment variables to add
                  ru: Список переменных окружения для добавления
                detailsLink: "https://docs.docker.com/engine/reference/builder/#env"
              - name: expose
                value: "[string, ...]"
                description:
                  en: Set exposed ports
                  ru: Установить открытые порты
                detailsLink: "https://docs.docker.com/engine/reference/builder/#expose"
              - name: healthcheck
                value: "{ test: [string, ...], interval: string, retries: int }"
                description:
                  en: Healthcheck configuration. Intervals are in seconds.
                  ru: Конфигурация проверки состояния. Интервалы в секундах.
                detailsLink: "https://docs.docker.com/engine/reference/builder/#healthcheck"
              - name: labels
                value: "{ name string: value string, ... }"
                description:
                  en: List of labels to add
                  ru: Список лейблов для добавления
              - name: stopSignal
                value: "string"
                description:
                  en: Set STOPSIGNAL
                  ru: Установить STOPSIGNAL
                detailsLink: "https://docs.docker.com/engine/reference/builder/#stopsignal"
              - name: user
                value: "string"
                description:
                  en: Set USER
                  ru: Установить USER
                detailsLink: "https://docs.docker.com/engine/reference/builder/#user"
              - name: volumes
                value: "[string, ...]"
                description:
                  en: List of volumes to add
                  ru: Список томов для добавления
                detailsLink: "https://docs.docker.com/engine/reference/builder/#volume"
              - name: workingDir
                value: "string"
                description:
                  en: Set WORKDIR
                  ru: Установить WORKDIR
                detailsLink: "https://docs.docker.com/engine/reference/builder/#workdir"
              - name: removeEnv
                value: "[ string || /REGEXP/, ... ]"
                description:
                  en: List of environment variables to remove
                  ru: Список переменных окружения для удаления
              - name: removeLabels
                value: "[ string || /REGEXP/, ... ]"
                description:
                  en: List of labels to remove
                  ru: Список лейблов для удаления
              - name: removeVolumes
                value: "[string, ...]"
                description:
                  en: List of volumes to remove
                  ru: Список томов для удаления
              - name: keepEssentialWerfLabels
                value: "bool"
                description:
                  en: Do not remove werf labels necessary for normal operation
                  ru: Не удалять необходимые для штатной работы werf лейблы
              - name: clearCmd
                value: "bool"
                description:
                  en: Remove CMD
                  ru: Очистить CMD
              - name: clearEntrypoint
                value: "bool"
                description:
                  en: Remove ENTRYPOINT
                  ru: Очистить ENTRYPOINT
              - name: clearUser
                value: "bool"
                description:
                  en: Remove USER
                  ru: Очистить USER
              - name: clearWorkingDir
                value: "bool"
                description:
                  en: Remove WORKDIR
                  ru: Очистить WORKDIR
  - id: stapel-section
    description:
      en: "Stapel image section: optional, define as many image sections as you need"
      ru: "Секция Stapel image: может использоваться произвольное количество секций"
    isCollapsedByDefault: false
    directives:
      - << : *dockerfile-image-section-image
      - name: artifact
        value: "string"
        description:
          en: The unique name for artifact (DEPRECATED)
          ru: Уникальное имя артефакта (DEPRECATED)
        detailsArticle:
          all: "/usage/build/stapel/imports.html"
      - << : *dockerfile-image-section-final
      - << : *meta-section-build-cache-version
      - name: platform
        description:
          en: List of target platforms for this image (for example ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
          ru: Список целевых платформ для данного образа (например ['linux/amd64', 'linux/arm64', 'linux/arm/v8'])
        value: "[ string, ... ]"
      - name: from
        value: "string"
        description:
          en: "The name of a base image"
          ru: Имя и тег базового образа
        detailsArticle:
          all: "/usage/build/stapel/base.html#from-fromlatest"
      - name: fromLatest
        value: "bool"
        description:
          en: "To use actual base image without caching"
          ru: Использование актуального базового образа (без кеширования)
        detailsArticle:
          all: "/usage/build/stapel/base.html#from-fromlatest"
      - name: fromImage
        value: "string"
        description:
          en: "To use image as base image by image name"
          ru: "Использование образа из werf.yaml в качестве базового"
        detailsArticle:
          en: "/usage/build/stapel/base.html#fromimage"
          ru: "/usage/build/stapel/base.html#fromimage"
      - name: fromArtifact
        value: "string"
        description:
          en: "To use artifact as base image by artifact name (DEPRECATED)"
          ru: "Использование образа артефакта из werf.yaml в качестве базового (DEPRECATED)"
      - name: fromCacheVersion
        value: "string"
        description:
          en: "Cache version"
          ru: "Версия кеша"
        detailsArticle:
          all: "/usage/build/stapel/base.html#fromcacheversion"
      - name: disableGitAfterPatch
        value: "bool"
        description:
          en: "Disable updating git sources (gitCache, gitLatestPatch stages)"
          ru: "Отключение актуализации исходников Git (стадии gitCache, gitLatestPatch)"
        detailsArticle:
          en: "/usage/build/stapel/instructions.html#disabling-source-updates-skipping-gitcache-and-gitlatestpatch-stages"
          ru: "/usage/build/stapel/instructions.html#отключение-обновления-исходников-стадии-gitcache-и-gitlatestpatch"
      - name: git
        description:
          en: "Set of directives to add source files from git repositories (both the project repository and any other)"
          ru: "Набор директив для добавления исходных файлов из git-репозиториев (как репозитория проекта, так и любого другого)"
        detailsArticle:
          all: "/usage/build/stapel/git.html"
        collapsible: true
        isCollapsedByDefault: false
        directiveList:
          - name: url
            value: "string"
            description:
              en: "The address of the remote repository"
              ru: "Адрес git-репозитория"
            detailsArticle:
              en: "/usage/build/stapel/git.html#working-with-remote-repositories"
              ru: "/usage/build/stapel/git.html#работа-с-удаленными-репозиториями"
          - name: basicAuth
            value: "string"
            description:
              en: "Basic authentication for the remote repository"
              ru: "Basic аутентификация для удаленного репозитория"
            directiveList:
              - name: username
                value: "string"
                description:
                  en: "Username"
                  ru: "Имя пользователя"
              - name: password
                value: "string"
                description:
                  en: "Password source"
                  ru: "Источник пароля"
                directiveList:
                  - name: env
                    value: "string"
                    description:
                      en: "Environment variable"
                      ru: "Переменная окружения"
                  - name: file
                    value: "string"
                    description:
                      en: "File path"
                      ru: "Путь к файлу"
                  - name: value
                    value: "string"
                    description:
                      en: Custom string value
                      ru: Произвольное строковое значение
          - name: branch
            value: "string"
            description:
              en: "The branch name"
              ru: "Имя ветки"
            detailsArticle:
              en: "/usage/build/stapel/git.html#syntax-of-a-git-mapping"
              ru: "/usage/build/stapel/git.html#синтаксис"
          - name: commit
            value: "string"
            description:
              en: "The commit"
              ru: "Коммит"
          - name: tag
            value: "string"
            description:
              en: "The tag name"
              ru: "Имя тега"
          - name: add
            value: "string"
            description:
              en: "A source path in a repository"
              ru: "Исходный путь в репозитории"
            detailsArticle:
              en: "/usage/build/stapel/git.html#copying-directories"
              ru: "/usage/build/stapel/git.html#копирование-директорий"
          - name: to
            value: "string"
            description:
              en: "A destination path in image"
              ru: "Путь назначения в образе"
            detailsArticle:
              en: "/usage/build/stapel/git.html#copying-directories"
              ru: "/usage/build/stapel/git.html#копирование-директорий"
          - name: owner
            value: "string"
            description:
              en: "The name or UID of the owner"
              ru: "Имя или UID владельца"
            detailsArticle:
              en: "/usage/build/stapel/git.html#changing-the-owner"
              ru: "/usage/build/stapel/git.html#изменение-владельца"
          - name: group
            value: "string"
            description:
              en: "The name or GID of the owner’s group"
              ru: "Имя или GID группы"
            detailsArticle:
              en: "/usage/build/stapel/git.html#changing-the-owner"
              ru: "/usage/build/stapel/git.html#изменение-владельца"
          - name: includePaths
            value: "[ glob, ... ]"
            description:
              en: "Globs for including"
              ru: "Глобы добавления"
            detailsArticle:
              en: "/usage/build/stapel/git.html#using-filters"
              ru: "/usage/build/stapel/git.html#использование-фильтров"
          - name: excludePaths
            value: "[ glob, ... ]"
            description:
              en: "Globs for excluding"
              ru: "Глобы исключения"
            detailsArticle:
              en: "/usage/build/stapel/git.html#using-filters"
              ru: "/usage/build/stapel/git.html#использование-фильтров"
          - name: stageDependencies
            description:
              en: "The organization of restarting assembly instructions when defined changes occur in the git repository"
              ru: "Настройка перевыполнения сборочных инструкций при изменениях определённых файлов в репозитории"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-changes-in-the-git-repo"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-изменений-в-git-репозитории"
            directives:
              - name: install
                value: "[ glob, ... ]"
                description:
                  en: "Globs for install stage"
                  ru: "Глобы стадии install"
              - name: beforeSetup
                value: "[ glob, ... ]"
                description:
                  en: "Globs for beforeSetup stage"
                  ru: "Глобы стадии beforeSetup"
              - name: setup
                value: "[ glob, ... ]"
                description:
                  en: "Globs for setup stage"
                  ru: "Глобы стадии setup"
      - <<: *dockerfile-secrets-section
        detailsArticle:
          en: "/usage/build/stapel/instructions.html#using-build-secrets"
          ru: "/usage/build/stapel/instructions.html#использование-сборочных-секретов"
      - name: shell
        description:
          en: "Shell assembly instructions"
          ru: "Shell сборочные инструкции"
        detailsArticle:
          all: "/usage/build/stapel/instructions.html#shell"
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: beforeInstall
            value: "[ string, ... ]"
            description:
              en: "Commands for beforeInstall stage"
              ru: "Команды для стадии beforeInstall"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#shell"
          - name: install
            value: "[ string, ... ]"
            description:
              en: "Commands for install stage"
              ru: "Команды для стадии install"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#shell"
          - name: beforeSetup
            value: "[ string, ... ]"
            description:
              en: "Commands for beforeSetup stage"
              ru: "Команды для стадии beforeSetup"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#shell"
          - name: setup
            value: "[ string, ... ]"
            description:
              en: "Commands for setup stage"
              ru: "Команды для стадии setup"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#shell"
          - name: cacheVersion
            value: "string"
            description:
              en: "Common cache version"
              ru: "Общая версия кеша"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: beforeInstallCacheVersion
            value: "string"
            description:
              en: "Cache version for beforeInstall stage"
              ru: "Версия кеша для стадии beforeInstall"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: installCacheVersion
            value: "string"
            description:
              en: "Cache version for install stage"
              ru: "Версия кеша для стадии install"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: beforeSetupCacheVersion
            value: "string"
            description:
              en: "Cache version for beforeSetup stage"
              ru: "Версия кеша для стадии beforeSetup"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: setupCacheVersion
            value: "string"
            description:
              en: "Cache version for setup stage"
              ru: "Версия кеша для стадии setup"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
      - name: ansible
        description:
          en: "Ansible assembly instructions"
          ru: "Ansible сборочные инструкции"
        detailsArticle:
          all: "/usage/build/stapel/instructions.html#ansible"
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: beforeInstall
            value: "[ task, ... ]"
            description:
              en: "Tasks for beforeInstall stage"
              ru: "Задания для стадии beforeInstall"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#ansible"
          - name: install
            value: "[ task, ... ]"
            description:
              en: "Tasks for install stage"
              ru: "Задания для стадии install"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#ansible"
          - name: beforeSetup
            value: "[ task, ... ]"
            description:
              en: "Tasks for beforeSetup stage"
              ru: "Задания для стадии beforeSetup"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#ansible"
          - name: setup
            value: "[ task, ... ]"
            description:
              en: "Tasks for setup stage"
              ru: "Задания для стадии setup"
            detailsArticle:
              all: "/usage/build/stapel/instructions.html#ansible"
          - name: cacheVersion
            value: "string"
            description:
              en: "Common cache version"
              ru: "Общая версия кеша"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: beforeInstallCacheVersion
            value: "string"
            description:
              en: "Cache version for beforeInstall stage"
              ru: "Версия кеша для стадии beforeInstall"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: installCacheVersion
            value: "string"
            description:
              en: "Cache version for install stage"
              ru: "Версия кеша для стадии install"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: beforeSetupCacheVersion
            value: "string"
            description:
              en: "Cache version for beforeSetup stage"
              ru: "Версия кеша для стадии beforeSetup"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
          - name: setupCacheVersion
            value: "string"
            description:
              en: "Cache version for setup stage"
              ru: "Версия кеша для стадии setup"
            detailsArticle:
              en: "/usage/build/stapel/instructions.html#dependency-on-the-cacheversion"
              ru: "/usage/build/stapel/instructions.html#зависимость-от-значения-cacheversion"
      - <<: *common_image_spec_config
      - name: docker
        description:
          en: "Set of directives to change the image manifest (DEPRECATED). Incompatible with the imageSpec directive"
          ru: "Набор директив для изменения манифеста образа (DEPRECATED). Несовместимо с директивой imageSpec"
        detailsArticle:
          all: "/usage/build/stapel/dockerfile.html"
        collapsible: true
        isCollapsedByDefault: false
        directives:
          - name: exactValues
            value: "bool"
            description:
              en: "Set specified options values as-is, including unescaped quotes and spaces. Option affects only docker-server backend and does not affect buildah backend."
              ru: "Включить использование незаэкранированных символов (например кавычки и пробелы) в значениях опций. Опция имеет действие только при использовании docker-server backend, и не влияет на работу buildah backend."
          - name: USER
            value: "string"
            description:
              en: "The user name (or UID) and optionally the user group (or GID)"
              ru: "Имя пользователя (или UID) и необязательная пользовательская группа (или GID)"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#user"
          - name: WORKDIR
            value: "string"
            description:
              en: "The working directory"
              ru: "Рабочая директория"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#workdir"
          - name: VOLUME
            value: "[ string, ... ]"
            description:
              en: "Mount points"
              ru: "Точки монтирования"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#volume"
          - name: ENV
            value: "{ name string: value string, ... }"
            description:
              en: "The environment variables"
              ru: "Переменные окружения"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#env"
          - name: LABEL
            value: "{ name string: value string, ... }"
            description:
              en: "The metadata to an image"
              ru: "Метаданные"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#label"
          - name: EXPOSE
            value: "[ string, ... ]"
            description:
              en: "To inform Docker that the container listens on the specified network ports at runtime"
              ru: "Описание сетевых портов, которые будут прослушиваться в запущенном контейнере"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#expose"
          - name: ENTRYPOINT
            value: "string | [ string, ... ]"
            description:
              en: "To configure a container that will run as an executable. Shell and exec forms are supported"
              ru: "Команда по умолчанию, которая будет выполнена при запуске контейнера (форма записи shell или exec)"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#entrypoint"
            detailsCustomLinks:
              en:
                - text: "How the Stapel builder processes CMD and ENTRYPOINT"
                  article: "/usage/build/stapel/base.html#how-the-stapel-builder-processes-cmd-and-entrypoint"
              ru:
                - text: "Как сборщик Stapel работает с CMD и ENTRYPOINT"
                  article: "/usage/build/stapel/base.html#как-сборщик-stapel-работает-с-cmd-и-entrypoint"
          - name: CMD
            value: "string | [ string, ... ]"
            description:
              en: "To provide default arguments for the ENTRYPOINT to configure a container that will run as an executable. Shell and exec forms are supported"
              ru: "Аргументы по умолчанию для ENTRYPOINT (форма записи shell или exec)"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#cmd"
            detailsCustomLinks:
              en:
                - text: "How the Stapel builder processes CMD and ENTRYPOINT"
                  article: "/usage/build/stapel/base.html#how-the-stapel-builder-processes-cmd-and-entrypoint"
              ru:
                - text: "Как сборщик Stapel работает с CMD и ENTRYPOINT"
                  article: "/usage/build/stapel/base.html#как-сборщик-stapel-работает-с-cmd-и-entrypoint"
          - name: HEALTHCHECK
            value: string
            description:
              en: "To tell Docker how to test a container to check that it is still working"
              ru: "Инструкции, которые Docker может использовать для проверки работоспособности запущенного контейнера"
            detailsLink: "https://docs.docker.com/engine/reference/builder/#healthcheck"
      - name: mount
        description:
          en: "Mount points"
          ru: "Точки монтирования"
        detailsArticle:
          all: "/usage/build/stapel/mounts.html"
        collapsible: true
        isCollapsedByDefault: false
        directiveList:
          - name: from
            value: "tmp_dir || build_dir"
            description:
              en: "Service folder name"
              ru: "Имя служебной директории"
          - name: fromPath
            value: "string"
            description:
              en: "Absolute or relative path to an arbitrary file or folder on host"
              ru: "Абсолютный или относительный путь до произвольного файла на хосте"
          - name: to
            value: "string"
            description:
              en: "Absolute path in image"
              ru: "Абсолютный путь в образе"
      - name: import
        description:
          en: "Imports"
          ru: "Импортирование из образов"
        detailsArticle:
          all: "/usage/build/stapel/imports.html"
        collapsible: true
        isCollapsedByDefault: false
        directiveList:
          - name: artifact
            value: "string"
            description:
              en: "The artifact name from which you want to copy files (DEPRECATED)"
              ru: "Имя артефакта, из которого выполнять копирование файлов (DEPRECATED)"
          - name: image
            value: "string"
            description:
              en: "The image name from which you want to copy files"
              ru: "Имя образа, из которого выполнять копирование файлов"
          - name: stage
            value: "string"
            description:
              en: "The stage name from which you want to copy files (the latest one by default)"
              ru: "Имя стадии, из которой выполнять копирование файлов (по умолчанию последняя)"
          - name: before
            value: "string"
            description:
              en: "The stage name before which to perform importing files. At present, only install and setup stages are supported"
              ru: "Выбор стадии импортирования файлов при сборке, до стадии install или setup"
          - name: after
            value: "string"
            description:
              en: "The stage name after which to perform importing files. At present, only install and setup stages are supported"
              ru: "Выбор стадии импортирования файлов при сборке, после стадии install или setup"
          - name: add
            value: "string"
            description:
              en: "The absolute file or folder path in source image for copying"
              ru: "Абсолютный путь до файла или директории в выбранном образе"
          - name: to
            value: "string"
            description:
              en: "The absolute path in destination image. In case of absence, destination path equals source path"
              ru: "Абсолютный путь в конечном образе. По умолчанию соответствует пути add"
          - name: owner
            value: "string"
            description:
              en: "The name or UID of the owner"
              ru: "Имя или UID владельца"
          - name: group
            value: "string"
            description:
              en: "The name or GID of the owner’s group"
              ru: "Имя или GID группы"
          - name: includePaths
            value: "[ glob, ... ]"
            description:
              en: "Globs for including"
              ru: "Глобы добавления"
          - name: excludePaths
            value: "[ glob, ... ]"
            description:
              en: "Globs for excluding"
              ru: "Глобы исключения"
      - name: dependencies
        description:
          en: "Dependencies images for current image"
          ru: "Образы-зависимости для текущего образа"
        collapsible: true
        isCollapsedByDefault: false
        directiveList:
          - name: image
            value: "string"
            description:
              en: "Dependency image name, which should be built before building current image"
              ru: "Имя зависимого образа, который должен быть собран до сборки текущего образа"
          - name: before
            value: "string"
            description:
              en: "The stage name before which image info should be imported (specify install or setup). Specified target env variables will be available at user stages after stage specified by this directive."
              ru: "Выбор стадии перед которой должна быть импортирована информация об образе (требуется указать install или setup). Указанные переменные окружения будут доступны в пользовательских стадиях после указанной данной директивой стадии."
          - name: after
            value: "string"
            description:
              en: "The stage name after which image info should be imported (specify install or setup). Specified target env variables will be available at user stages after stage specified by this directive."
              ru: "Выбор стадии после которой должна быть импортирована информация об образе (требуется указать install или setup). Указанные переменные окружения будут доступны в пользовательских стадиях после указанной данной директивой стадии."
          - name: imports
            description:
              en: "Define target environment variables to import image information into current image (optional)"
              ru: "Определить аргументы для импорта информации о зависимом образе в текущий образ используя переменные окружения (опционально)"
            collapsible: false
            isCollapsedByDefault: false
            directiveList:
            - name: type
              value: "string"
              description:
                en: "Type of image info: ImageName, ImageDigest, ImageRepo or ImageTag"
                ru: "Тип импортируемой информации об образе: ImageName, ImageDigest, ImageRepo или ImageTag"
            - name: targetEnv
              value: "string"
              description:
                en: "Name of environment variable which will contain specified type of information about image"
                ru: "Имя переменной окружения, которая будет содержать указанный тип информации об образе"

