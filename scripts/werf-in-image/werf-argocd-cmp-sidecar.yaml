{{ $_ := set . "App" "argocd-cmp-sidecar" }}
{{ $_ := set . "Distros" (list "ubuntu") }}
{{ $_ := set . "DefaultGroupName" "2" }}
{{ $_ := set . "DefaultChannelName" "stable" }}
{{ $_ := set . "DefaultDistroName" "ubuntu" }}

# set up default channel version  
{{- $trdlChannelsValues := .Files.Get "../../trdl_channels.yaml" | fromYaml -}}
{{- range $_, $groupObject := $trdlChannelsValues.groups }}
  {{- if eq $groupObject.name $.DefaultGroupName }}
    {{- range $_, $channelObject := $groupObject.channels }}
      {{- if eq $channelObject.name $.DefaultChannelName}}
        {{ $_ := set $ "DefaultChannelVersion" $channelObject.version }}
      {{- end}}
    {{- end}}
  {{- end}}
{{- end}}

{{ include "templates/base_config.tmpl" . }}
